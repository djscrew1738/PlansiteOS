# PlansiteOS Environment Configuration
# Copy this to .env and update with your values

# =============================================================================
# NODE ENVIRONMENT
# =============================================================================
NODE_ENV=development
# Options: development, production, test

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=5000
HOST=0.0.0.0
# Listen on all interfaces (0.0.0.0) or localhost only (127.0.0.1)

# =============================================================================
# DOMAIN & URLS
# =============================================================================
DOMAIN=ctlplumbingllc.com
DOMAIN_URL=http://localhost:5000
# Production: https://ctlplumbingllc.com

# Tailscale IP for internal network access (optional)
TAILSCALE_IP=100.109.158.92

# =============================================================================
# DATABASE (PostgreSQL)
# =============================================================================
# For development (Docker)
DATABASE_URL=postgresql://plansite:plansite@localhost:5432/plansite

# For production
# DATABASE_URL=postgresql://plansite:your-secure-password@postgres:5432/plansite

# PostgreSQL credentials (for Docker Compose)
POSTGRES_USER=plansite
POSTGRES_PASSWORD=plansite
POSTGRES_DB=plansite

# Database connection options
DATABASE_SSL=false
# Set to 'true' in production with proper SSL cert

# Connection pool settings (optional)
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_IDLE_TIMEOUT_MS=30000
DATABASE_CONNECTION_TIMEOUT_MS=2000

# =============================================================================
# REDIS (Cache & Background Jobs)
# =============================================================================
REDIS_URL=redis://localhost:6379/0
# For Docker: redis://redis:6379/0

# =============================================================================
# AI SERVICES (Required for blueprint analysis)
# =============================================================================
ANTHROPIC_API_KEY=sk-ant-your-api-key-here
# Get your API key from: https://console.anthropic.com/

# Claude model configuration
CLAUDE_MODEL=claude-3-5-sonnet-20241022
CLAUDE_MAX_TOKENS=4096
CLAUDE_TEMPERATURE=0.0

# AI timeout settings (milliseconds)
AI_TIMEOUT_MS=120000
# 2 minutes for blueprint analysis

# Circuit breaker settings
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT_MS=60000
CIRCUIT_BREAKER_RESET_MS=30000

# =============================================================================
# FILE UPLOADS
# =============================================================================
# Upload directory (local filesystem)
UPLOAD_DIR=./storage/uploads

# Maximum file size (bytes) - default 200MB
UPLOAD_MAX_BYTES=209715200

# Rate limiting
UPLOAD_RATE_LIMIT=10
UPLOAD_RATE_WINDOW_SECONDS=60

# Allowed file types (comma-separated)
ALLOWED_FILE_TYPES=application/pdf,image/png,image/jpeg,application/dxf

# Maximum file size for processing (MB)
MAX_FILE_SIZE_MB=200

# =============================================================================
# OBJECT STORAGE (MinIO / S3) - OPTIONAL
# =============================================================================
# Currently not implemented - files stored locally
# Uncomment and configure if you want to use MinIO or AWS S3

# S3_ENDPOINT=http://localhost:9000
# S3_ACCESS_KEY=minioadmin
# S3_SECRET_KEY=minioadmin
# S3_BUCKET=plansite-blueprints
# S3_REGION=us-east-1
# S3_SECURE=false

# For AWS S3 (comment out MinIO endpoint)
# S3_ENDPOINT=s3.amazonaws.com
# S3_ACCESS_KEY=your-aws-access-key
# S3_SECRET_KEY=your-aws-secret-key
# S3_BUCKET=your-bucket-name
# S3_REGION=us-east-1
# S3_SECURE=true

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Development - single origin
CORS_ORIGIN=http://localhost:3000

# Production - multiple origins (comma-separated)
# CORS_ORIGIN=https://ctlplumbingllc.com,https://www.ctlplumbingllc.com,https://app.ctlplumbingllc.com

# =============================================================================
# FRONTEND (Vite)
# =============================================================================
# API base URL for frontend (Vite env vars must start with VITE_)
VITE_API_BASE=http://localhost:5000

# Production
# VITE_API_BASE=https://api.ctlplumbingllc.com

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=info
# Options: error, warn, info, http, verbose, debug, silly

# Log file paths (optional)
LOG_FILE_PATH=./logs/app.log
LOG_ERROR_FILE_PATH=./logs/error.log

# Log to console in development
LOG_CONSOLE=true

# =============================================================================
# TIMEZONE
# =============================================================================
TZ=America/Chicago
# Cron jobs will use this timezone

# =============================================================================
# NOTIFICATIONS (Optional - Twilio SMS)
# =============================================================================
# Uncomment to enable SMS notifications

# TWILIO_ACCOUNT_SID=your-twilio-account-sid
# TWILIO_AUTH_TOKEN=your-twilio-auth-token
# TWILIO_PHONE_NUMBER=+15551234567
# YOUR_PHONE_NUMBER=+15557654321

# =============================================================================
# MONITORING & OBSERVABILITY (Optional)
# =============================================================================
# Sentry for error tracking
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# SENTRY_ENVIRONMENT=development
# SENTRY_TRACES_SAMPLE_RATE=0.1

# Application insights / metrics
# ENABLE_METRICS=true
# METRICS_PORT=9090

# =============================================================================
# SECURITY
# =============================================================================
# JWT secret for authentication (if implemented)
# JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
# JWT_EXPIRES_IN=7d

# Session secret (if using express-session)
# SESSION_SECRET=your-super-secret-session-key

# API rate limiting
RATE_LIMIT_WINDOW_MS=900000
# 15 minutes

RATE_LIMIT_MAX_REQUESTS=100
# Max 100 requests per window

# Helmet security headers
ENABLE_HELMET=true

# =============================================================================
# DEVELOPMENT TOOLS
# =============================================================================
# Enable debug mode
DEBUG=false

# Enable hot reload
HOT_RELOAD=true

# Enable GraphQL playground (if implemented)
# GRAPHQL_PLAYGROUND=true

# Mock external services in development
# MOCK_EXTERNAL_SERVICES=false

# =============================================================================
# TESTING
# =============================================================================
# Test database (separate from development)
# TEST_DATABASE_URL=postgresql://plansite:plansite@localhost:5432/plansite_test

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Enable/disable features without code changes
FEATURE_BLUEPRINT_ANALYSIS=true
FEATURE_AI_ESTIMATION=true
FEATURE_NOTIFICATIONS=false
FEATURE_REAL_TIME_UPDATES=false

# =============================================================================
# WORKER / BACKGROUND JOBS
# =============================================================================
# Number of worker processes
WORKER_CONCURRENCY=2

# Job retry settings
JOB_MAX_RETRIES=3
JOB_RETRY_DELAY_MS=5000

# =============================================================================
# PRODUCTION ONLY
# =============================================================================
# Only set these in production

# SSL Certificate paths (for HTTPS)
# SSL_CERT_PATH=/etc/letsencrypt/live/ctlplumbingllc.com/fullchain.pem
# SSL_KEY_PATH=/etc/letsencrypt/live/ctlplumbingllc.com/privkey.pem

# Admin email for SSL certificate renewal
# ADMIN_EMAIL=admin@ctlplumbingllc.com

# =============================================================================
# NOTES
# =============================================================================
# 1. Never commit .env file to git (it's in .gitignore)
# 2. Keep .env.example up to date when adding new variables
# 3. Use strong passwords in production
# 4. Rotate secrets regularly
# 5. Use environment-specific values (.env.development, .env.production)
